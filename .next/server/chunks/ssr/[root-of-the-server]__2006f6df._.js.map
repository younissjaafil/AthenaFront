{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Development/Athena_v1/AthenaFront/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///C:/Development/Athena_v1/AthenaFront/components/theme-toggle.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useTheme } from \"./../lib/theme-provider\";\r\n\r\nexport function ThemeToggle() {\r\n  const { theme, toggleTheme } = useTheme();\r\n\r\n  return (\r\n    <button\r\n      onClick={toggleTheme}\r\n      className=\"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\"\r\n      aria-label=\"Toggle theme\"\r\n    >\r\n      {theme === \"light\" ? (\r\n        <span className=\"text-xl\">üåô</span>\r\n      ) : (\r\n        <span className=\"text-xl\">‚òÄÔ∏è</span>\r\n      )}\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,IAAA,qIAAQ;IAEvC,qBACE,8OAAC;QACC,SAAS;QACT,WAAU;QACV,cAAW;kBAEV,UAAU,wBACT,8OAAC;YAAK,WAAU;sBAAU;;;;;iCAE1B,8OAAC;YAAK,WAAU;sBAAU;;;;;;;;;;;AAIlC","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///C:/Development/Athena_v1/AthenaFront/lib/api-client.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport axios from \"axios\";\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_ATHENA_CORE_URL;\r\n/**\r\n * Client-side API client that uses Clerk's useAuth hook.\r\n * Use this in client components.\r\n */\r\nexport const createClientApiClient = (\r\n  getToken: () => Promise<string | null>\r\n) => {\r\n  const client = axios.create({\r\n    baseURL: API_URL,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  });\r\n\r\n  // Add request interceptor to attach JWT token\r\n  client.interceptors.request.use(\r\n    async (config) => {\r\n      const token = await getToken();\r\n      if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n      }\r\n      return config;\r\n    },\r\n    (error) => {\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n\r\n  return client;\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIA,MAAM;AAKC,MAAM,wBAAwB,CACnC;IAEA,MAAM,SAAS,gJAAK,CAAC,MAAM,CAAC;QAC1B,SAAS;QACT,SAAS;YACP,gBAAgB;QAClB;IACF;IAEA,8CAA8C;IAC9C,OAAO,YAAY,CAAC,OAAO,CAAC,GAAG,CAC7B,OAAO;QACL,MAAM,QAAQ,MAAM;QACpB,IAAI,OAAO;YACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;QAClD;QACA,OAAO;IACT,GACA,CAAC;QACC,OAAO,QAAQ,MAAM,CAAC;IACxB;IAGF,OAAO;AACT","debugId":null}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///C:/Development/Athena_v1/AthenaFront/hooks/useCurrentUser.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@clerk/nextjs\";\r\nimport { createClientApiClient } from \"@/lib/api-client\";\r\n\r\n/**\r\n * User role and profile information from AthenaCore backend\r\n */\r\nexport interface CurrentUser {\r\n  // User info from /users/me\r\n  id: string;\r\n  clerkUserId: string;\r\n  email: string;\r\n  firstName?: string;\r\n  lastName?: string;\r\n\r\n  // Role flags (derived from backend responses)\r\n  isAdmin: boolean;\r\n  isCreator: boolean;\r\n  isStudent: boolean;\r\n\r\n  // Creator info (if isCreator is true)\r\n  creatorId?: string;\r\n}\r\n\r\n/**\r\n * Hook to get current user information and roles from AthenaCore backend.\r\n *\r\n * Calls:\r\n * 1. GET /users/me (required - contains isAdmin flag)\r\n * 2. GET /creators/me (optional - 404 means not a creator)\r\n * 3. Derives isStudent = !isAdmin && !isCreator\r\n *\r\n * @returns React Query result with CurrentUser data\r\n */\r\nexport function useCurrentUser() {\r\n  const { getToken, isSignedIn } = useAuth();\r\n\r\n  return useQuery({\r\n    queryKey: [\"currentUser\"],\r\n    queryFn: async (): Promise<CurrentUser> => {\r\n      const apiClient = createClientApiClient(getToken);\r\n\r\n      // 1. Get user info (required)\r\n      const userResponse = await apiClient.get(\"/users/me\");\r\n      const user = userResponse.data;\r\n\r\n      // 2. Check if user is a creator (404 = not a creator)\r\n      let isCreator = false;\r\n      let creatorId: string | undefined;\r\n      try {\r\n        const creatorResponse = await apiClient.get(\"/creators/me\");\r\n        isCreator = true;\r\n        creatorId = creatorResponse.data.id;\r\n      } catch (error: any) {\r\n        // 404 is expected if user is not a creator\r\n        if (error.response?.status !== 404) {\r\n          console.error(\"Error checking creator status:\", error);\r\n        }\r\n      }\r\n\r\n      // 3. Derive roles\r\n      const isAdmin = user.isAdmin === true;\r\n      const isStudent = !isAdmin && !isCreator;\r\n\r\n      return {\r\n        id: user.id,\r\n        clerkUserId: user.clerkUserId,\r\n        email: user.email,\r\n        firstName: user.firstName,\r\n        lastName: user.lastName,\r\n        isAdmin,\r\n        isCreator,\r\n        isStudent,\r\n        creatorId,\r\n      };\r\n    },\r\n    enabled: isSignedIn === true,\r\n    staleTime: 5 * 60 * 1000, // 5 minutes\r\n    retry: 1,\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAoCO,SAAS;IACd,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG,IAAA,6PAAO;IAExC,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU;YAAC;SAAc;QACzB,SAAS;YACP,MAAM,YAAY,IAAA,6IAAqB,EAAC;YAExC,8BAA8B;YAC9B,MAAM,eAAe,MAAM,UAAU,GAAG,CAAC;YACzC,MAAM,OAAO,aAAa,IAAI;YAE9B,sDAAsD;YACtD,IAAI,YAAY;YAChB,IAAI;YACJ,IAAI;gBACF,MAAM,kBAAkB,MAAM,UAAU,GAAG,CAAC;gBAC5C,YAAY;gBACZ,YAAY,gBAAgB,IAAI,CAAC,EAAE;YACrC,EAAE,OAAO,OAAY;gBACnB,2CAA2C;gBAC3C,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;oBAClC,QAAQ,KAAK,CAAC,kCAAkC;gBAClD;YACF;YAEA,kBAAkB;YAClB,MAAM,UAAU,KAAK,OAAO,KAAK;YACjC,MAAM,YAAY,CAAC,WAAW,CAAC;YAE/B,OAAO;gBACL,IAAI,KAAK,EAAE;gBACX,aAAa,KAAK,WAAW;gBAC7B,OAAO,KAAK,KAAK;gBACjB,WAAW,KAAK,SAAS;gBACzB,UAAU,KAAK,QAAQ;gBACvB;gBACA;gBACA;gBACA;YACF;QACF;QACA,SAAS,eAAe;QACxB,WAAW,IAAI,KAAK;QACpB,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///C:/Development/Athena_v1/AthenaFront/components/auth/RoleRedirector.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\r\n\r\n/**\r\n * Component that redirects users to their appropriate dashboard based on roles.\r\n * Priority: Admin > Creator > Student\r\n *\r\n * Usage: Place this component in layouts or pages where you want automatic redirection\r\n * after sign-in (e.g., in the student/creator/admin layout to redirect if wrong role)\r\n */\r\nexport function RoleRedirector() {\r\n  const router = useRouter();\r\n  const { data: user, isLoading } = useCurrentUser();\r\n\r\n  useEffect(() => {\r\n    if (isLoading || !user) return;\r\n\r\n    // Redirect based on role priority\r\n    if (user.isAdmin) {\r\n      router.replace(\"/admin/dashboard\");\r\n    } else if (user.isCreator) {\r\n      router.replace(\"/creator/dashboard\");\r\n    } else if (user.isStudent) {\r\n      router.replace(\"/student/dashboard\");\r\n    }\r\n  }, [user, isLoading, router]);\r\n\r\n  // Show loading state while determining role\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-pulse text-gray-500 dark:text-gray-400\">\r\n          Loading your dashboard...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Higher-order component that wraps a page and ensures user is redirected\r\n * to their correct dashboard if they're on the wrong route.\r\n *\r\n * @param allowedRoles - Array of roles allowed to access this page\r\n */\r\ninterface RoleGuardProps {\r\n  children: React.ReactNode;\r\n  allowedRoles: (\"admin\" | \"creator\" | \"student\")[];\r\n}\r\n\r\nexport function RoleGuard({ children, allowedRoles }: RoleGuardProps) {\r\n  const router = useRouter();\r\n  const { data: user, isLoading } = useCurrentUser();\r\n\r\n  useEffect(() => {\r\n    if (isLoading || !user) return;\r\n\r\n    // Check if user has one of the allowed roles\r\n    const hasAccess =\r\n      (allowedRoles.includes(\"admin\") && user.isAdmin) ||\r\n      (allowedRoles.includes(\"creator\") && user.isCreator) ||\r\n      (allowedRoles.includes(\"student\") && user.isStudent);\r\n\r\n    if (!hasAccess) {\r\n      // Redirect to user's correct dashboard\r\n      if (user.isAdmin) {\r\n        router.replace(\"/admin/dashboard\");\r\n      } else if (user.isCreator) {\r\n        router.replace(\"/creator/dashboard\");\r\n      } else {\r\n        router.replace(\"/student/dashboard\");\r\n      }\r\n    }\r\n  }, [user, isLoading, router, allowedRoles]);\r\n\r\n  // Show loading state while checking permissions\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-pulse text-gray-500 dark:text-gray-400\">\r\n          Verifying permissions...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show nothing if user doesn't have access (they'll be redirected)\r\n  if (!user) return null;\r\n\r\n  const hasAccess =\r\n    (allowedRoles.includes(\"admin\") && user.isAdmin) ||\r\n    (allowedRoles.includes(\"creator\") && user.isCreator) ||\r\n    (allowedRoles.includes(\"student\") && user.isStudent);\r\n\r\n  if (!hasAccess) return null;\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAJA;;;;;AAaO,SAAS;IACd,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,MAAM,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,yIAAc;IAEhD,IAAA,kNAAS,EAAC;QACR,IAAI,aAAa,CAAC,MAAM;QAExB,kCAAkC;QAClC,IAAI,KAAK,OAAO,EAAE;YAChB,OAAO,OAAO,CAAC;QACjB,OAAO,IAAI,KAAK,SAAS,EAAE;YACzB,OAAO,OAAO,CAAC;QACjB,OAAO,IAAI,KAAK,SAAS,EAAE;YACzB,OAAO,OAAO,CAAC;QACjB;IACF,GAAG;QAAC;QAAM;QAAW;KAAO;IAE5B,4CAA4C;IAC5C,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BAAiD;;;;;;;;;;;IAKtE;IAEA,OAAO;AACT;AAaO,SAAS,UAAU,EAAE,QAAQ,EAAE,YAAY,EAAkB;IAClE,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,MAAM,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,yIAAc;IAEhD,IAAA,kNAAS,EAAC;QACR,IAAI,aAAa,CAAC,MAAM;QAExB,6CAA6C;QAC7C,MAAM,YACJ,AAAC,aAAa,QAAQ,CAAC,YAAY,KAAK,OAAO,IAC9C,aAAa,QAAQ,CAAC,cAAc,KAAK,SAAS,IAClD,aAAa,QAAQ,CAAC,cAAc,KAAK,SAAS;QAErD,IAAI,CAAC,WAAW;YACd,uCAAuC;YACvC,IAAI,KAAK,OAAO,EAAE;gBAChB,OAAO,OAAO,CAAC;YACjB,OAAO,IAAI,KAAK,SAAS,EAAE;gBACzB,OAAO,OAAO,CAAC;YACjB,OAAO;gBACL,OAAO,OAAO,CAAC;YACjB;QACF;IACF,GAAG;QAAC;QAAM;QAAW;QAAQ;KAAa;IAE1C,gDAAgD;IAChD,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BAAiD;;;;;;;;;;;IAKtE;IAEA,mEAAmE;IACnE,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,YACJ,AAAC,aAAa,QAAQ,CAAC,YAAY,KAAK,OAAO,IAC9C,aAAa,QAAQ,CAAC,cAAc,KAAK,SAAS,IAClD,aAAa,QAAQ,CAAC,cAAc,KAAK,SAAS;IAErD,IAAI,CAAC,WAAW,OAAO;IAEvB,qBAAO;kBAAG;;AACZ","debugId":null}}]
}