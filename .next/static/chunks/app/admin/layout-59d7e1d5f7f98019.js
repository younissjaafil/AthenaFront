(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{3990:(e,t,r)=>{"use strict";r.d(t,{ThemeToggle:()=>n});var a=r(5155),s=r(4356);function n(){let{theme:e,toggleTheme:t}=(0,s.D)();return(0,a.jsx)("button",{onClick:t,className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Toggle theme",children:"light"===e?(0,a.jsx)("span",{className:"text-xl",children:"\uD83C\uDF19"}):(0,a.jsx)("span",{className:"text-xl",children:"☀️"})})}},4356:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,N:()=>l});var a=r(5155),s=r(2115);let n=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)("light");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",r=e||t;l(r),document.documentElement.classList.toggle("dark","dark"===r)},[]),(0,a.jsx)(n.Provider,{value:{theme:r,toggleTheme:()=>{let e="light"===r?"dark":"light";l(e),localStorage.setItem("theme",e),document.documentElement.classList.toggle("dark","dark"===e)}},children:t})}function i(){let e=(0,s.useContext)(n);return void 0===e?{theme:"light",toggleTheme:()=>{}}:e}},4461:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(5155),s=r(2619),n=r.n(s),l=r(63),i=r(5016),d=r(3990),c=r(8899);let o=[{name:"Dashboard",href:"/admin/dashboard",icon:"\uD83D\uDCCA"},{name:"Users",href:"/admin/users",icon:"\uD83D\uDC65"},{name:"Agents",href:"/admin/agents",icon:"\uD83E\uDD16"},{name:"Analytics",href:"/admin/analytics",icon:"\uD83D\uDCC8"},{name:"Settings",href:"/admin/settings",icon:"⚙️"}];function m(e){let{children:t}=e,r=(0,l.usePathname)();return(0,a.jsx)(c.K,{allowedRoles:["admin"],children:(0,a.jsxs)("div",{className:"min-h-screen flex",children:[(0,a.jsxs)("aside",{className:"w-64 bg-gray-900 dark:bg-black text-white flex flex-col",children:[(0,a.jsxs)("div",{className:"h-16 flex items-center justify-between px-6 border-b border-gray-800 dark:border-gray-950",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n(),{href:"/",className:"text-xl font-bold text-brand-teal-400",children:"Athena"}),(0,a.jsx)("span",{className:"ml-2 text-xs font-semibold text-red-400 bg-red-900/30 px-2 py-0.5 rounded",children:"Admin"})]}),(0,a.jsx)(d.ThemeToggle,{})]}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-1",children:o.map(e=>{let t=r===e.href;return(0,a.jsxs)(n(),{href:e.href,className:(0,i.cn)("flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-colors",t?"bg-brand-teal-500/20 text-brand-teal-400":"text-gray-300 hover:bg-gray-800 dark:hover:bg-gray-950"),children:[(0,a.jsx)("span",{className:"text-lg",children:e.icon}),e.name]},e.href)})}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-800 dark:border-gray-950",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-red-900/50 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-red-400",children:"A"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white truncate",children:"Admin"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 truncate",children:"admin@athena.ai"})]})]})})]}),(0,a.jsx)("main",{className:"flex-1 overflow-auto bg-gray-50 dark:bg-black",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto p-8",children:t})})]})})}},5016:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2821),s=r(5889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},8602:(e,t,r)=>{Promise.resolve().then(r.bind(r,4461))},8899:(e,t,r)=>{"use strict";r.d(t,{K:()=>c});var a=r(5155),s=r(2115),n=r(63),l=r(2454),i=r(7471),d=r(5125);function c(e){let{children:t,allowedRoles:r}=e,c=(0,n.useRouter)(),{data:o,isLoading:m}=function(){let{getToken:e,isSignedIn:t}=(0,i.d)();return(0,l.I)({queryKey:["currentUser"],queryFn:async()=>{let t,r=(e=>{let t=d.A.create({baseURL:"https://athenacore-production.up.railway.app",headers:{"Content-Type":"application/json"}});return t.interceptors.request.use(async t=>{let r=await e();return r&&(t.headers.Authorization="Bearer ".concat(r)),t},e=>Promise.reject(e)),t})(e),a=(await r.get("/users/me")).data,s=!1;try{let e=await r.get("/creators/me");s=!0,t=e.data.id}catch(e){var n;(null==(n=e.response)?void 0:n.status)!==404&&console.error("Error checking creator status:",e)}let l=!0===a.isAdmin,i=!l&&!s;return{id:a.id,clerkUserId:a.clerkUserId,email:a.email,firstName:a.firstName,lastName:a.lastName,isAdmin:l,isCreator:s,isStudent:i,creatorId:t}},enabled:!0===t,staleTime:3e5,retry:1})}();return((0,s.useEffect)(()=>{!m&&o&&(r.includes("admin")&&o.isAdmin||r.includes("creator")&&o.isCreator||r.includes("student")&&o.isStudent||(o.isAdmin?c.replace("/admin/dashboard"):o.isCreator?c.replace("/creator/dashboard"):c.replace("/student/dashboard")))},[o,m,c,r]),m)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-pulse text-gray-500 dark:text-gray-400",children:"Verifying permissions..."})}):o&&(r.includes("admin")&&o.isAdmin||r.includes("creator")&&o.isCreator||r.includes("student")&&o.isStudent)?(0,a.jsx)(a.Fragment,{children:t}):null}}},e=>{e.O(0,[125,619,909,743,470,441,255,358],()=>e(e.s=8602)),_N_E=e.O()}]);