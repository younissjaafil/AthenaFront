(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[889],{2093:(e,r,t)=>{Promise.resolve().then(t.bind(t,7413))},3990:(e,r,t)=>{"use strict";t.d(r,{ThemeToggle:()=>n});var a=t(5155),s=t(4356);function n(){let{theme:e,toggleTheme:r}=(0,s.D)();return(0,a.jsx)("button",{onClick:r,className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Toggle theme",children:"light"===e?(0,a.jsx)("span",{className:"text-xl",children:"\uD83C\uDF19"}):(0,a.jsx)("span",{className:"text-xl",children:"☀️"})})}},4356:(e,r,t)=>{"use strict";t.d(r,{D:()=>d,N:()=>l});var a=t(5155),s=t(2115);let n=(0,s.createContext)(void 0);function l(e){let{children:r}=e,[t,l]=(0,s.useState)("light");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme"),r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",t=e||r;l(t),document.documentElement.classList.toggle("dark","dark"===t)},[]),(0,a.jsx)(n.Provider,{value:{theme:t,toggleTheme:()=>{let e="light"===t?"dark":"light";l(e),localStorage.setItem("theme",e),document.documentElement.classList.toggle("dark","dark"===e)}},children:r})}function d(){let e=(0,s.useContext)(n);return void 0===e?{theme:"light",toggleTheme:()=>{}}:e}},5016:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var a=t(2821),s=t(5889);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},7413:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(5155),s=t(2619),n=t.n(s),l=t(63),d=t(5016),i=t(3990),c=t(8899);let o=[{name:"Dashboard",href:"/student/dashboard",icon:"\uD83D\uDCCA"},{name:"My Chats",href:"/student/chats",icon:"\uD83D\uDCAC"},{name:"Sessions",href:"/student/sessions",icon:"\uD83D\uDCC5"},{name:"Settings",href:"/student/settings",icon:"⚙️"}];function u(e){let{children:r}=e,t=(0,l.usePathname)();return(0,a.jsx)(c.K,{allowedRoles:["student","creator","admin"],children:(0,a.jsxs)("div",{className:"min-h-screen flex",children:[(0,a.jsxs)("aside",{className:"w-64 bg-white dark:bg-gray-900 border-r border-border-light dark:border-gray-800 flex flex-col",children:[(0,a.jsxs)("div",{className:"h-16 flex items-center justify-between px-6 border-b border-border-light dark:border-gray-800",children:[(0,a.jsx)(n(),{href:"/",className:"text-xl font-bold text-brand-purple-600 dark:text-brand-purple-400",children:"Athena"}),(0,a.jsx)(i.ThemeToggle,{})]}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-1",children:o.map(e=>{let r=t===e.href;return(0,a.jsxs)(n(),{href:e.href,className:(0,d.cn)("flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-colors",r?"bg-brand-purple-50 text-brand-purple-700 dark:bg-brand-purple-950 dark:text-brand-purple-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"),children:[(0,a.jsx)("span",{className:"text-lg",children:e.icon}),e.name]},e.href)})}),(0,a.jsx)("div",{className:"p-4 border-t border-border-light dark:border-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-brand-purple-100 dark:bg-brand-purple-950 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-brand-purple-700 dark:text-brand-purple-400",children:"S"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:"Student"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:"student@athena.ai"})]})]})})]}),(0,a.jsx)("main",{className:"flex-1 overflow-auto bg-background-light dark:bg-gray-950",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto p-8",children:r})})]})})}},8899:(e,r,t)=>{"use strict";t.d(r,{K:()=>c});var a=t(5155),s=t(2115),n=t(63),l=t(2454),d=t(7471),i=t(5125);function c(e){let{children:r,allowedRoles:t}=e,c=(0,n.useRouter)(),{data:o,isLoading:u}=function(){let{getToken:e,isSignedIn:r}=(0,d.d)();return(0,l.I)({queryKey:["currentUser"],queryFn:async()=>{let r,t=(e=>{let r=i.A.create({baseURL:"https://athenacore-production.up.railway.app",headers:{"Content-Type":"application/json"}});return r.interceptors.request.use(async r=>{let t=await e();return t&&(r.headers.Authorization="Bearer ".concat(t)),r},e=>Promise.reject(e)),r})(e),a=(await t.get("/users/me")).data,s=!1;try{let e=await t.get("/creators/me");s=!0,r=e.data.id}catch(e){var n;(null==(n=e.response)?void 0:n.status)!==404&&console.error("Error checking creator status:",e)}let l=!0===a.isAdmin,d=!l&&!s;return{id:a.id,clerkUserId:a.clerkUserId,email:a.email,firstName:a.firstName,lastName:a.lastName,isAdmin:l,isCreator:s,isStudent:d,creatorId:r}},enabled:!0===r,staleTime:3e5,retry:1})}();return((0,s.useEffect)(()=>{!u&&o&&(t.includes("admin")&&o.isAdmin||t.includes("creator")&&o.isCreator||t.includes("student")&&o.isStudent||(o.isAdmin?c.replace("/admin/dashboard"):o.isCreator?c.replace("/creator/dashboard"):c.replace("/student/dashboard")))},[o,u,c,t]),u)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-pulse text-gray-500 dark:text-gray-400",children:"Verifying permissions..."})}):o&&(t.includes("admin")&&o.isAdmin||t.includes("creator")&&o.isCreator||t.includes("student")&&o.isStudent)?(0,a.jsx)(a.Fragment,{children:r}):null}}},e=>{e.O(0,[125,788,619,146,441,255,358],()=>e(e.s=2093)),_N_E=e.O()}]);